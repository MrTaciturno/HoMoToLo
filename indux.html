<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="estilos/style.css">
</head>
<body>
    <fieldset class= "capsula" id= "ito">
        O menu de furto começa aqui:
    </fieldset>
    <p id="botao">

    </p>

     <script>

        // informações para a montagem do Menu de Furto - 
        // 0 - nome do menu
        // 1 - opções sem subitem
        // 2 - opcoes com subitem
        let menuFurto = [
            "Vestígio de Furto",
            [
                "aspecto recente",
                "concurso 2 ou mais"
            ],
            [
                ["escalada",
                    [
                        "sem vestígios, modo provável"
                    ],
                    [
                        [
                            "sujidades",
                            ["calçado", "pés", "mãos","terra"],
                            []
                        ],
                        [
                            "fragmentos",
                            ["cimentícios","tijolo","vidro"],
                            []
                        ]
                    ]
                ],
                [
                    "arrombamento",
                    [],
                    []
                ],
                [
                    "danos",
                    [],
                    []
                ]
            ]
        ]
        
        function cria_um_check(texto, nomeHeranca){
            var lbl = document.createElement("fieldset");
            lbl.setAttribute("id",nomeHeranca+"_"+texto);
            lbl.setAttribute("class","capsula");

            var chk = document.createElement("input");
            chk.setAttribute("type","checkbox");
            chk.setAttribute("id", nomeHeranca+"_"+texto+"chk");

            var txt = document.createTextNode(texto);
            lbl.appendChild(chk);
            lbl.appendChild(txt);

            var elmnt = document.getElementById(nomeHeranca);

            //var mybr = document.createElement('br');
            elmnt.appendChild(lbl);
            //elmnt.appendChild(mybr);
        }

        function cria_todos_check (menu, nomeHeranca, indice){
            
            
            var lbl = document.createElement("fieldset");
            lbl.setAttribute("id",nomeHeranca+"_"+menu[0]+"_"+indice);
            lbl.setAttribute("class","geral");
            
            var lgnd = document.createElement("legend");
            lgnd.setAttribute("id",nomeHeranca+"_"+menu[0]+"_lgng_"+indice);


            var chk = document.createElement("input");
            chk.setAttribute("type","checkbox");
            chk.setAttribute("id", nomeHeranca+"_"+menu[0]+"_chk_"+indice);

            var txt = document.createTextNode(menu[0]+" "+indice);
            lgnd.appendChild(chk);
            lgnd.appendChild(txt);

            lbl.appendChild(lgnd);

            
            var elmnt = document.getElementById(nomeHeranca);

            //var mybr = document.createElement('br');
            elmnt.appendChild(lbl);
            //elmnt.appendChild(mybr);


//            cria_um_check(menu[0],"field"+menu[0]);
            

            for(let i = 0; i < menu[1].length;i++){
                cria_um_check(menu[1][i],nomeHeranca+"_"+menu[0]+"_"+indice);
            }
            for(let i = 0; i < menu[2].length;i++){
                cria_todos_check(menu[2][i], nomeHeranca+"_"+menu[0]+"_"+indice, indice);
            }
           
            
        }
        
        let indice_vest_furto = 1;
        
        cria_todos_check(menuFurto,"ito", 1);
        indice_vest_furto++;
        
        function novovest (ind){
            
            console.log(ind)
            cria_todos_check(menuFurto,"ito", ind);
            ind++;
            return ind;
        }

        var but = document.createElement("input");
        but.setAttribute("type","button");
        but.setAttribute("id","Novo "+menuFurto[0]);
        but.setAttribute("value","Novo "+menuFurto[0]);

        
        var elmnt = document.getElementById("botao");
        elmnt.appendChild(but);
        
        //but.addEventListener("click", indice_vest_furto = novovest(indice_vest_furto));
        but.addEventListener("click", function() {
            
            cria_todos_check(menuFurto,"ito", indice_vest_furto);
            console.log(indice_vest_furto);
            indice_vest_furto++;
        })
        

    </script>
    <!-- <input type="button" id="bt" value="Novo vestígio" onclick="indice_vest_furto = novovest(indice_vest_furto)"> -->
</body>
</html>